# نظام إدارة الإشعارات

## النظرة العامة
تم ربط صفحة الإشعارات بنجاح مع باك إند Syria Go Admin باستخدام الـ APIs المحددة.

## APIs المستخدمة

### 1. جلب الإشعارات
```
GET {{url}}/general/notifications
```
- يجلب جميع الإشعارات مع معلومات الصفحات
- يدعم المتغيرات: `page` و `per_page`

### 2. تعيين إشعار كمقروء
```
PUT {{url}}/general/notifications/{id}/read
```
- يعين إشعار محدد كمقروء
- يحتاج لـ ID الإشعار في المسار

### 3. جلب عدد الإشعارات غير المقروءة
```
GET {{url}}/general/notifications/unread-count
```
- يجلب عدد الإشعارات غير المقروءة

## الميزات المتاحة

### واجهة المستخدم
- **عرض الإشعارات**: قائمة تفاعلية لجميع الإشعارات
- **البحث**: إمكانية البحث في العناوين والرسائل
- **التصنيف**: تبويبات للتصنيف حسب النوع والحالة
- **الإحصائيات**: عداد للإشعارات غير المقروءة

### العمليات
- **تعيين كمقروء**: تعيين إشعار واحد أو جميع الإشعارات كمقروءة
- **الحذف**: حذف إشعار واحد أو جميع الإشعارات
- **التحديث**: إعادة تحميل البيانات

### أنواع الإشعارات المدعومة
- `booking` - الحجوزات (أزرق)
- `listing` - الإعلانات (أخضر)
- `review` - التقييمات (أصفر)
- `payment` - المدفوعات (بنفسجي)
- `system` - النظام (أحمر)
- `user` - المستخدمين (وردي)
- `report` - التقارير (برتقالي)
- `general` - عام (رمادي)

## بنية البيانات

### Notification Object
```typescript
interface Notification {
  id: number
  user_id: number | null
  title: string
  message: string
  read_at: string | null  // null = غير مقروء
  metadata: NotificationMetadata
  notificationable_id: number | null
  notificationable_type: string
  created_at: string
  user: NotificationUser | null
}
```

### Response Format
```json
{
  "success": true,
  "data": [
    {
      "id": 9,
      "title": "sdfd",
      "message": "dsfdsf",
      "read_at": null,
      "created_at": "2025-05-07 16:46:47",
      "user": null,
      "...": "..."
    }
  ],
  "meta": {
    "current_page": 1,
    "last_page": 1,
    "per_page": 50,
    "total": 5
  }
}
```

## الملفات المحدثة

1. **`/lib/api.ts`**: إضافة دوال API للإشعارات
2. **`/types/notification.ts`**: تعريف أنواع البيانات
3. **`/app/(dashboard)/notifications/page.tsx`**: صفحة إدارة الإشعارات

## ملاحظات فنية

- تم استخدام التحقق من الأخطاء والمعالجة المناسبة
- دعم للتحميل والحالات الفارغة
- تحديث فوري للواجهة بعد العمليات
- استخدام TypeScript للتحقق من الأنواع
- متوافق مع تصميم الواجهة الحالي

## الاستخدام

1. انتقل إلى صفحة الإشعارات في لوحة التحكم
2. استعرض الإشعارات وقم بتصفيتها حسب الحاجة
3. استخدم أزرار العمليات لإدارة الإشعارات
4. راقب عداد الإشعارات غير المقروءة في الشريط العلوي

# إدارة التقييمات - Reviews Management

## نظرة عامة
صفحة إدارة التقييمات تتيح للمدراء عرض وإدارة جميع تقييمات المستخدمين في المنصة مع إمكانية حظر التقييمات المخالفة.

## المميزات الرئيسية

### 1. عرض التقييمات
- **قائمة شاملة**: عرض جميع التقييمات مع التفاصيل الكاملة
- **معلومات المستخدم**: اسم المستخدم، الصورة الشخصية، رقم الهاتف
- **تفاصيل الإقامة**: صورة الإقامة، العنوان، النوع
- **التقييم**: عدد النجوم والتعليق
- **التاريخ**: تاريخ إنشاء التقييم

### 2. الإحصائيات
- **إجمالي التقييمات**: العدد الكلي للتقييمات
- **التقييمات النشطة**: التقييمات غير المحظورة
- **التقييمات المحظورة**: التقييمات التي تم حظرها
- **متوسط التقييم**: المتوسط العام لجميع التقييمات

### 3. الفلترة والبحث
- **البحث النصي**: البحث في التقييمات والتعليقات
- **فلترة حسب الحالة**: نشط، محظور، الكل
- **فلترة حسب التقييم**: حسب عدد النجوم (1-5)

### 4. إدارة التقييمات
- **عرض التفاصيل**: عرض تفاصيل كاملة للتقييم
- **حظر التقييم**: إخفاء التقييم من المنصة
- **إلغاء الحظر**: إعادة عرض التقييم المحظور

## واجهة المستخدم

### البطاقات الإحصائية
```tsx
// عرض 4 بطاقات إحصائية ملونة
- إجمالي التقييمات (أزرق)
- التقييمات النشطة (أخضر)
- التقييمات المحظورة (أحمر)
- متوسط التقييم (أصفر)
```

### شريط الفلترة
```tsx
// أدوات الفلترة والبحث
- حقل البحث النصي
- فلتر حسب الحالة
- فلتر حسب التقييم
```

### جدول التقييمات
```tsx
// أعمدة الجدول
- المستخدم (الصورة، الاسم، الهاتف)
- الإقامة (الصورة، العنوان، النوع)
- التقييم (النجوم، الدرجة)
- التعليق (نص التعليق)
- التاريخ (تاريخ الإنشاء)
- الحالة (نشط/محظور)
- الإجراءات (عرض، حظر/إلغاء حظر)
```

## نافذة التفاصيل

### معلومات التقييم
- **التقييم**: عدد النجوم والدرجة
- **التعليق**: نص التعليق كاملاً
- **الحالة**: نشط أو محظور مع تاريخ الحظر

### معلومات المستخدم
- **الصورة الشخصية**: صورة المستخدم
- **الاسم**: الاسم الأول والأخير
- **الهاتف**: رقم الهاتف مع رمز الدولة
- **البريد الإلكتروني**: مع حالة التحقق
- **الحالة**: نشط أو غير نشط

### تفاصيل الإقامة
- **الصورة**: صورة الإقامة
- **العنوان**: العنوان بالعربية والإنجليزية
- **النوع**: نوع الإقامة (شقة، منزل، فيلا...)
- **المميزات**: عدد الضيوف، الغرف، الحمامات
- **السعر**: السعر بالعملة المحددة
- **التقييم العام**: متوسط التقييمات

### تفاصيل الحجز
- **التواريخ**: تاريخ الوصول والمغادرة
- **الحالة**: حالة الحجز (مكتمل، مؤكد، في الانتظار...)
- **المبلغ**: إجمالي المبلغ المدفوع
- **الضيوف**: عدد البالغين، الأطفال، الرضع، الحيوانات

## API التكامل

### جلب التقييمات
```typescript
GET /admin/reviews
Parameters:
- page: رقم الصفحة
- per_page: عدد العناصر في الصفحة
- search: نص البحث
- status: حالة التقييم (all, active, blocked)
- rating: درجة التقييم (all, 1-5)
```

### حظر التقييم
```typescript
POST /admin/reviews/{id}/block
```

### إلغاء حظر التقييم
```typescript
POST /admin/reviews/{id}/unblock
```

### جلب تقييم واحد
```typescript
GET /admin/reviews/{id}
```

## الأمان والصلاحيات
- **صلاحيات المدير**: فقط المدراء يمكنهم الوصول لهذه الصفحة
- **المصادقة**: تتطلب تسجيل الدخول كمدير
- **السجلات**: تسجيل جميع عمليات الحظر وإلغاء الحظر

## استخدام الملفات

### الملفات الرئيسية
- `app/(dashboard)/reviews/page.tsx` - صفحة إدارة التقييمات
- `components/reviews/review-detail-dialog.tsx` - نافذة عرض التفاصيل
- `types/review.ts` - تعريف أنواع البيانات
- `lib/api.ts` - API للتقييمات

### الأنواع المستخدمة
```typescript
interface Review {
  id: number;
  booking_id: number;
  user_id: number;
  comment: string | null;
  rating: number;
  blocked_at: string | null;
  created_at: string;
  booking: Booking;
  user: User;
}
```

## الرسائل والتنبيهات
- **نجاح الحظر**: "تم حظر التقييم بنجاح"
- **نجاح إلغاء الحظر**: "تم إلغاء حظر التقييم بنجاح"
- **خطأ**: "حدث خطأ أثناء تعديل حالة التقييم"

## المظهر والتصميم
- **التخطيط المتجاوب**: يتكيف مع جميع أحجام الشاشات
- **الرسوم المتحركة**: انتقالات سلسة باستخدام Framer Motion
- **الألوان**: نظام ألوان متسق مع التصميم العام
- **الأيقونات**: استخدام أيقونات Lucide React

## التحسينات المستقبلية
- إضافة إمكانية الرد على التقييمات
- تصدير التقييمات إلى ملفات
- إحصائيات متقدمة للتقييمات
- نظام تنبيهات للتقييمات المشبوهة

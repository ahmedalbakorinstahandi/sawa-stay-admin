# صفحة إدارة الإعدادات

## نظرة عامة

صفحة إدارة الإعدادات تسمح للمسؤولين بإدارة وتحرير جميع إعدادات النظام بسهولة. الصفحة تدعم أنواع مختلفة من البيانات وتوفر واجهة مستخدم متقدمة للتحرير مع محرر TinyMCE لمحتوى HTML.

## الميزات الرئيسية

### 1. أنواع البيانات المدعومة
- **نص (text)**: للنصوص البسيطة والروابط
- **HTML**: للمحتوى المنسق مع محرر TinyMCE المتقدم
- **عدد عشري (float)**: للأرقام العشرية (مثل العمولة والرسوم)
- **عدد صحيح (int)**: للأرقام الصحيحة
- **منطقي (boolean)**: للقيم الصحيحة/الخاطئة

### 2. واجهة المستخدم المتقدمة
- **البحث والتصفية**: بحث سريع حسب الاسم أو القيمة وتصفية حسب النوع
- **العرض المجمع**: تجميع الإعدادات حسب الفئات (social_media, about, terms, إلخ)
- **التحرير الفردي**: تحرير كل إعداد على حدة مع معاينة مباشرة
- **التحرير الجماعي**: تحديد وتحرير عدة إعدادات معاً
- **إحصائيات مرئية**: عرض إحصائيات الإعدادات بالبطاقات التفاعلية
- **واجهة عربية**: دعم كامل للغة العربية مع RTL

### 3. محرر TinyMCE المتقدم
- **دعم العربية**: RTL support مع اتجاه النص من اليمين لليسار
- **أدوات تحرير متقدمة**: تنسيق النصوص، القوائم، الجداول، الروابط
- **معاينة مباشرة**: رؤية التغييرات فور إجرائها
- **رمز HTML**: إمكانية عرض وتحرير الكود المصدري

## الاستخدام

### إضافة إعداد جديد
1. اضغط على زر "إضافة إعداد جديد"
2. أدخل المفتاح (Key) - يجب أن يكون فريداً
3. اختر النوع المناسب
4. أدخل القيمة
5. حدد إذا كان يسمح بالقيم الفارغة
6. اضغط "إنشاء"

### تعديل إعداد موجود
1. ابحث عن الإعداد المطلوب
2. عدل القيمة في الحقل المناسب
3. اضغط "حفظ" لحفظ التغييرات

### التحرير الجماعي
1. انتقل إلى تبويب "التحرير الجماعي"
2. حدد الإعدادات المطلوبة
3. استخدم الأزرار في الأعلى للعمليات الجماعية

## API Endpoints

### جلب جميع الإعدادات
```http
GET /admin/settings
```

### جلب إعداد واحد
```http
GET /admin/settings/{id}
```

### تحديث إعداد واحد
```http
PUT /admin/settings/{id}
Content-Type: application/json

{
    "value": "القيمة الجديدة"
}
```

### تحديث إعدادات متعددة
```http
PUT /admin/settings
Content-Type: application/json

{
    "settings": [
        {
            "key": "المفتاح",
            "value": "القيمة"
        }
    ]
}
```

### إنشاء إعداد جديد
```http
POST /admin/settings
Content-Type: application/json

{
    "key": "المفتاح",
    "value": "القيمة",
    "type": "text",
    "allow_null": false,
    "is_settings": true
}
```

### حذف إعداد
```http
DELETE /admin/settings/{id}
```

## محرر TinyMCE

يتم استخدام محرر TinyMCE لإعدادات HTML مع المميزات التالية:
- دعم الاتجاه من اليمين إلى اليسار (RTL)
- دعم اللغة العربية
- أدوات تحرير متقدمة
- معاينة مباشرة

### إعداد TinyMCE
تأكد من إضافة مفتاح API في متغيرات البيئة:
```env
NEXT_PUBLIC_TINYMCE_API_KEY=your_api_key_here
```

## تجميع الإعدادات

يتم تجميع الإعدادات تلقائياً حسب بادئة المفتاح:
- `app.name` → مجموعة "التطبيق"
- `social_media.facebook` → مجموعة "وسائل التواصل"
- `about-ar` → مجموعة "حول"

## الأمان

- جميع الطلبات تتطلب توكن تفويض
- التحقق من صحة البيانات قبل الإرسال
- حماية من الإدخال الضار

## الملفات المرتبطة

- `app/(dashboard)/settings/page.tsx` - الصفحة الرئيسية
- `app/api/settings/route.ts` - API للعمليات الجماعية
- `app/api/settings/[id]/route.ts` - API للعمليات المفردة
- `styles/settings.css` - الأنماط المخصصة

## متطلبات التشغيل

- Next.js 14+
- React 18+
- TinyMCE React
- Tailwind CSS
- shadcn/ui Components

## الدعم الفني

للحصول على المساعدة أو الإبلاغ عن مشاكل، يرجى التواصل مع فريق التطوير.
